---
version: scenario/v2
feature:
  description: V2 schema exampe
  scenarios:
    - description: Produce and Consumer to kafka
      simulate:
        adapter: broker/kafka
        messages:
          - topic: pageviews
            events:
              - pageview.json
      validate:
        adapter: broker/kafka
        messages:
          - topic: enriched_pageviews
            assert_that_received:
              timeout_after: 3s
              total_events:
                equals_to: 1
              unordered:
                - { equals_to_event: pageview.json }
